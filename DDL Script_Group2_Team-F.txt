CREATE TABLE ON_DEMAND (
event_name VARCHAR(20),
event_id SMALLINT,
price DECIMAL(9,0),
category VARCHAR(20),
PRIMARY KEY (event_id)
);

CREATE TABLE SERVICE_PROVIDER (
sp_name VARCHAR(20),
sp_id SMALLINT,
has_hd BOOLEAN,
has_ondemand BOOLEAN,
PRIMARY KEY (sp_id)
);

CREATE TABLE ON_DEMAND_SP (
sp_id SMALLINT,
event_id SMALLINT,
PRIMARY KEY(sp_id,event_id),
FOREIGN KEY (sp_id) REFERENCES SERVICE_PROVIDER(sp_id)
ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (event_id) REFERENCES ON_DEMAND(event_id)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE USERS (
first_name VARCHAR(20),
middle_name VARCHAR(20),
last_name VARCHAR(20),
user_id SMALLINT,
sp_id SMALLINT,
PRIMARY KEY (user_id),
FOREIGN KEY (sp_id) REFERENCES SERVICE_PROVIDER(sp_id)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE USER_1 (
user_id SMALLINT,
phone_no DECIMAL(10,0),
PRIMARY KEY (user_id,phone_no),
FOREIGN KEY (user_id) REFERENCES USERS(user_id)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE USER_2 (
user_id SMALLINT,
email_id VARCHAR(80),
PRIMARY KEY (user_id,email_id),
FOREIGN KEY (user_id) REFERENCES USERS(user_id)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE POSTAL_CODE (
pin_code DECIMAL(6,0),
city VARCHAR(30),
PRIMARY KEY (pin_code)
);

CREATE TABLE ADDRESS (
user_id SMALLINT,
pin_code DECIMAL(6,0),
house_no VARCHAR(30),
street_name VARCHAR(100),
PRIMARY KEY (user_id,pin_code),
FOREIGN KEY (user_id) REFERENCES USERS(user_id)
ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (pin_code) REFERENCES POSTAL_CODE(pin_code)
ON DELETE CASCADE ON UPDATE CASCADE
);



CREATE TABLE PACK (
pack_id SMALLINT,
sp_id SMALLINT,
price DECIMAL(6,0),
pack_name VARCHAR(30),
validity DECIMAL(2,0),
PRIMARY KEY (pack_id),
FOREIGN KEY (sp_id) REFERENCES SERVICE_PROVIDER(sp_id)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE CHANNEL (
channel_id SMALLINT,
channel_name VARCHAR(30),
category VARCHAR(100),
is_hd BOOLEAN,
PRIMARY KEY (channel_id)
);


CREATE TABLE PACK_CHANNEL_INFO (
pack_id SMALLINT,
channel_id SMALLINT,
PRIMARY KEY(pack_id,channel_id),
FOREIGN KEY (pack_id) REFERENCES PACK(pack_id)
ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (channel_id) REFERENCES CHANNEL(channel_id)
ON DELETE CASCADE ON UPDATE CASCADE


);

CREATE TABLE SHOWS (
show_id SMALLINT,
channel_id SMALLINT,
show_name VARCHAR(30),
start_time DECIMAL(4,0),
end_time DECIMAL(4,0),
PRIMARY KEY (show_id),
FOREIGN KEY (channel_id) REFERENCES CHANNEL(channel_id)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE SUBSCRIPTIONS (
pack_id SMALLINT,
user_id SMALLINT,
start_time DECIMAL(4,0),
end_time DECIMAL(4,0),
PRIMARY KEY (pack_id,user_id),
FOREIGN KEY (pack_id) REFERENCES PACK(pack_id)
ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (user_id) REFERENCES USERS(user_id)
ON DELETE CASCADE ON UPDATE CASCADE
);